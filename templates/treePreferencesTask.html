{% extends "layout.html" %}

{% block content %}

<div class="map-content" id="visElement"> </div>
<div class="popup" id="popup"></div>

<!-- Spinner -->
<div class="spinner-border custom-spinner" role="status" id="preferences-spinner">
        <span class="visually-hidden">Loading...</span>
</div>

<div class='instructions-outer'>
    <div>
        <button id="hideinstructions" data-bs-toggle="collapse" data-bs-target="#preferences-instructions">Hide/Show instructions</button>
    </div>
    <div class="instructions-content collapse show" id="preferences-instructions"> 
        <p><b>This page allows you to select a tree species and create a feasibility map for it.</b></p>
        <p>The feasibility map shows Maine colored by how likely the tree species is to be able to grow in each part of the map.  The likelihood or feasibility for the species is computed based on environmental factors that you will select from a list of options (e.g. annual mean temperature).  The environmental factors in the list are annotated with minimum and maximum values that the tree species will tolerate, and the computed importance of the environmental factor for the species.  The feasibility map will only take into consideration the factors you select from this list.</p>
        <p><b>To use this page:</b>
            <ol>
            <li>Select the tree species you want to work with.</li>
            <li>A list of environmental variables with their minimum and maximum values, and their computed importance rank for the tree species will appear.</li>
            <li>Select the variables you want to use in the tree feasibility map by checking the boxes.</li>
            <li>Press the create feasibility map button and wait for the map to appear.</li>
            </ol></p>
    </div>
</div>

<div class="filter-content">
    <img class="d-block mx-auto mb-4" src="/static/images/INSPIRES_logo.png" alt="" width="72" height="57">
    <hr>
    <div class="inner-menu">
        <a href="{{url_for('environmentalDataTask')}}">
            <img style="padding:2px;" src="/static/images/env_icon.png" alt="" width="50" height="50" title="Environmental Data Exploration">
            <div class="caption">Environmental Data</div>
        </a>
        <a href={{url_for('treeinventorytask')}}>
            <img style="padding:2px;" src="/static/images/tree_inventory.png" alt="" width="50" height="50" title="Tree Inventory Data Exploration">
            <div class="caption">Tree Inventory Data</div>
        </a>
        <a href="{{url_for('treepreferencestask')}}" style="border:1px solid black;">
            <img style="padding:2px;" src="/static/images/analysis.png" alt="" width="50" height="50" title="Analyses of Tree Preference Habitat">
            <div class="caption">Tree Environmental Preferences</div>
        </a>
    </div>
    <hr>
    <h5>Tree Species</h5>
    <hr>
    <div id="treesWithPreferencesgroup"></div>
</div>

<div class="pref-table-window">

    <div>
        <div id="treePreferencestables"></div>

        <div class="d-flex flex-row mb-3">
            <button type="button" class="btn btn-success" id="createfeasibilitymap">Create Feasibility Map</button>
            <div class="p-2" id="loading-message">Processing... Please wait.</div>
        </div>
        
    </div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="/static/scripts/treePreferencesTask.js"></script>
    {% endblock %}

